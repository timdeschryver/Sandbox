<form novalidate class="customer-form" (submit.preventDefault)="onSubmit()">
	<div class="form-card">
		<h2 class="form-title">Create Customer</h2>

		@for (error of customerForm().errors(); track $index) {
			<div class="alert alert-error">{{ error.message }}</div>
		}

		@if (customerForm().touched() && customerForm().invalid()) {
			<div class="validation-summary">
				<h3 class="validation-title">Please fix the following errors:</h3>
				<ul class="validation-list">
					@for (error of customerForm().errorSummary(); track $index) {
						<li class="validation-item">{{ error | validationMessage: true }}</li>
					}
				</ul>
			</div>
		}

		<fieldset class="form-fieldset">
			<legend>Customer Information</legend>
			<div class="form-row">
				<div class="form-group">
					<label [for]="customerForm.firstName().name()">First Name</label>
					<input type="text" [id]="customerForm.firstName().name()" [field]="customerForm.firstName" />
				</div>

				<div class="form-group">
					<label [for]="customerForm.lastName().name()">Last Name</label>
					<input type="text" [id]="customerForm.lastName().name()" [field]="customerForm.lastName" />
				</div>
			</div>
		</fieldset>

		<div class="checkbox-group">
			<input type="checkbox" id="hasBillingAddress" [field]="customerForm.hasBillingAddress" />
			<label for="hasBillingAddress" class="checkbox-label">Add Billing Address</label>
		</div>

		@if (!customerForm.billingAddress().hidden()) {
			<fieldset class="form-fieldset address-fieldset">
				<legend>Billing Address</legend>
				<sandbox-customer-address [address]="customerForm.billingAddress" />
			</fieldset>
		}

		<div class="checkbox-group">
			<input type="checkbox" id="hasShippingAddress" [field]="customerForm.hasShippingAddress" />
			<label for="hasShippingAddress" class="checkbox-label">Add Shipping Address</label>
		</div>

		@if (!customerForm.shippingAddress().hidden()) {
			<fieldset class="form-fieldset address-fieldset">
				<legend>Shipping Address</legend>
				<sandbox-customer-address [address]="customerForm.shippingAddress">
					<div class="form-group">
						<label for="note">Note</label>
						<textarea id="note" [field]="customerForm.shippingAddress.note"></textarea>
					</div>
				</sandbox-customer-address>
			</fieldset>
		}

		<div class="form-actions">
			<button type="submit" class="submit-button" [disabled]="customerForm().submitting()">
				@if (customerForm().submitting()) {
					<div class="loading"></div>
					<span>Creating Customer...</span>
				} @else {
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="18"
						height="18"
						viewBox="0 0 24 24"
						fill="none"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round"
					>
						<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
						<circle cx="9" cy="7" r="4" />
						<line x1="19" y1="8" x2="19" y2="14" />
						<line x1="22" y1="11" x2="16" y2="11" />
					</svg>
					<span>Create Customer</span>
				}
			</button>
		</div>
	</div>
</form>
